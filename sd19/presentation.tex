\documentclass{beamer}

\input{preamble}
\author{Adam Lassiter \and Willem Heijltjes\\Department of Computer Science\\University of Bath}

\usepackage{xifthen}

\begin{document}

    \frame{
        \titlepage
    }


    \frame{
        \frametitle{Introduction}
        
        Outline:
        \begin{itemize}
            \item Additive Linear Logic (ALL)
            \item Proof search in ALL through \emph{coalescence}
            \item Classical Logic (CL)
            \item Proof search in CL through \emph{coalescence} and \emph{additive stratification}
            \item Complexity bounds of proof search
            \item Dimensionality of CL formulae
        \end{itemize}
    }



    \frame{
        \frametitle{Additive Linear Logic (ALL)}

        \[ A, B, C \quad \defeq \quad 0 \mid 1 \mid a \mid \dual a \mid A + B \mid A \* B \]
        
        \begin{itemize}
            \item $0, a, \+$ are duals of $1, \dual a, \*$ respectively
        \end{itemize}
    }

    \frame{
        \frametitle{Additive Linear Logic (ALL)}
        
        Some examples:
        \begin{itemize}
            \item $(\atom1 \+ \dual{\atom2}) \* 1$ is the dual of $(\dual{\atom1} \* \atom2) \+ 0$ and vice versa
            \item $(\atom1 \+ (\dual{\atom2} \* \atom3 \* 0)) \* (\atom2 \+ 1)$
            \item etc.
        \end{itemize}
    }

    \frame{
        \frametitle{Additive Linear Logic (ALL)}

        \begin{figure}
            \centering
            \begin{minipage}{0.3\linewidth}
                \begin{prooftree}
                    \AxiomC{~}
                    \RightLabel{$ax$}
                    \UnaryInfC{$\vdash a,\dual a$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}{0.3\linewidth}
                \begin{prooftree}
                    \AxiomC{~}
                    \RightLabel{$\1$}
                    \UnaryInfC{$\vdash \1,A$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}{0.3\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash A,C$}
                    \RightLabel{$\+_1$}
                    \UnaryInfC{$\vdash A\+B,C$}
                \end{prooftree}
            \end{minipage}
        \end{figure}

        \begin{figure}
            \begin{minipage}{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash B,C$}
                    \RightLabel{$\+_2$}
                    \UnaryInfC{$\vdash A\+B,C$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash A,C$}
                    \AxiomC{$\vdash B,C$}
                    \RightLabel{$\*$}
                    \BinaryInfC{$\vdash A\*B,C$}
                \end{prooftree}
            \end{minipage}
        \end{figure}

        \begin{itemize}
            \item All sequents are comprised of a pair of terms, maintained by deduction rules
            \item $␣ \+ 0, ␣ \* 1$ are identities
            \item Sequents are not necessarily commutative, idempotent etc.
        \end{itemize}
    }

    \frame{
        \frametitle{Additive Linear Logic (ALL)}

        Example: $\vdash \atom1 \* \atom2, \dual{\atom1} \+ \dual{\atom2}$
        \begin{prooftree}
            \AxiomC{$~$}
            \RightLabel{$ax$}\UnaryInfC{$\vdash \atom1, \dual{\atom1}$}
            \RightLabel{$\+$}\UnaryInfC{$\vdash \atom1, \dual{\atom1} \+ \dual{\atom2}$}
            \AxiomC{$~$}
            \RightLabel{$ax$}\UnaryInfC{$\vdash \atom2, \dual{\atom2}$}
            \RightLabel{$\+$}\UnaryInfC{$\vdash \atom2, \dual{\atom1} \+ \dual{\atom2}$}
            \RightLabel{$\*$}\BinaryInfC{$\vdash \atom1 \* \atom2, \dual{\atom1} \+ \dual{\atom2}$}
        \end{prooftree}
    }



    \frame{
        \frametitle{Coalescence}
        
        Spawning:
        \[
            \vc{\begin{tikzpicture}[matrix]
                \foreach \x/\a in {1/\dual{\atom1}, 2/\+, 3/(\dual{\atom2}, 4/\+, 5/\dual{\atom3})}%
                    \draw[gray] (\x,0) node[src] {$\a$} (\x,.7) -- (\x,5.3);
                \foreach \y/\b in {1/(\atom1, 2/\*, 3/\atom2), 4/\*, 5/\atom3}%
                    \draw[gray] (0,\y) node[tgt] {$\b$} (.7,\y) -- (5.3,\y);
            \end{tikzpicture}}
            \quad\rightsquigarrow\quad
            \vc{\begin{tikzpicture}[matrix]
                \foreach \x/\a in {1/\dual{\atom1}, 2/\+, 3/(\dual{\atom2}, 4/\+, 5/\dual{\atom3})}%
                    \draw[gray] (\x,0) node[src] {$\a$} (\x,.7) -- (\x,5.3);
                \foreach \y/\b in {1/(\atom1, 2/\*, 3/\atom2), 4/\*, 5/\atom3}%
                    \draw[gray] (0,\y) node[tgt] {$\b$} (.7,\y) -- (5.3,\y);
                \foreach \p/\n in { {1,1}/a1, {3,3}/b1, {5,5}/c1} \node[tokB] (\n) at (\p) {};
            \end{tikzpicture}}
        \]

        \begin{itemize}
            \item Corresponds to axiom rule for ALL
        \end{itemize}

    }

    \frame{
        \frametitle{Coalescence}

        Transitions:
        \[
            \def\dual{}
            \begin{array}{ccc}
                \begin{tikzpicture}[matrix]
                    \foreach \i/\a in {1/{}, 2/\dual A, 3/{}}
                        {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                    \foreach \j/\b in {1/B, 2/\+, 3/C}
                        {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                    \node[tokG] (a) at (2,1) {};
                    \node[tokG] (c) at (2,2) {};
                    \draw[jmp1] (a) to (c);
                \end{tikzpicture}
                &
                \begin{tikzpicture}[matrix]
                    \foreach \i/\a in {1/{}, 2/\dual A, 3/{}}
                        {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                    \foreach \j/\b in {1/B, 2/\+, 3/C}
                        {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                    \node[tokG] (b) at (2,3) {};
                    \node[tokG] (c) at (2,2) {};
                    \draw[jmp1] (b) to (c);
                \end{tikzpicture}
                &
                \begin{tikzpicture}[matrix]
                  \foreach \i/\a in {1/{}, 2/\dual A, 3/{}}
                    {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                  \foreach \j/\b in {1/B, 2/\*, 3/C}
                    {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                  \node[tokG] (a) at (2,1) {};
                  \node[tokG] (b) at (2,3) {};
                  \node[tokG] (c) at (2,2) {};
                  \draw[jmp2] (a) to (c);
                  \draw[jmp2] (b) to (c);
                \end{tikzpicture}
                \\
                \begin{tikzpicture}[matrix]
                    \foreach \i/\a in {1/\dual A, 2/\*, 3/\dual B}
                        {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                    \foreach \j/\b in {1/{}, 2/C, 3/{}}
                        {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                    \node[tokG] (a) at (1,2) {};
                    \node[tokG] (b) at (3,2) {};
                    \node[tokG] (c) at (2,2) {};
                    \draw[jmp2] (a) to (c);
                    \draw[jmp2] (b) to (c);
                \end{tikzpicture}
                &
                \begin{tikzpicture}[matrix]
                    \foreach \i/\a in {1/\dual A, 2/\+, 3/\dual B}
                        {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                    \foreach \j/\b in {1/{}, 2/C, 3/{}}
                        {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                    \node[tokG] (a) at (1,2) {};
                    \node[tokG] (c) at (2,2) {};
                    \draw[jmp1] (a) to (c);
                \end{tikzpicture}
                &
                \begin{tikzpicture}[matrix]
                    \foreach \i/\a in {1/\dual A, 2/\+, 3/\dual B}
                        {\draw[gray] (\i,0) node[src] {$\a$} (\i,.7) -- (\i,3.3);}
                    \foreach \j/\b in {1/{}, 2/C, 3/{}}
                        {\draw[gray] (0,\j) node[tgt] {$\b$} (.7,\j) -- (3.3,\j);}
                    \node[tokG] (b) at (3,2) {};
                    \node[tokG] (c) at (2,2) {};
                    \draw[jmp1] (b) to (c);
                \end{tikzpicture}
            \end{array}
        \]
        
        \begin{itemize}
            \item Corresponds to sequent rules for ALL
        \end{itemize}
    }

    \frame{
        \frametitle{Coalescence}

        Example:
        \[
            \vc{\begin{tikzpicture}[matrix]
                \foreach \x/\a in {1/\dual{\atom1}, 2/\+, 3/(\dual{\atom2}, 4/\+, 5/\dual{\atom3})}%
                    \draw[gray] (\x,0) node[src] {$\a$} (\x,.7) -- (\x,5.3);
                \foreach \y/\b in {1/(\atom1, 2/\*, 3/\atom2), 4/\*, 5/\atom3}%
                    \draw[gray] (0,\y) node[tgt] {$\b$} (.7,\y) -- (5.3,\y);
                \foreach \p/\n in {
                    {2,1}/a2, {2,2}/ab,
                    {4,3}/b2, {2,3}/b3,
                    {4,5}/c2, {2,5}/c3%
                } \node[tokG] (\n) at (\p) {};
                \node[tokG] (abc) at (2,4) {};
                \node[circle,draw,gray,thick,inner sep=0pt,minimum size=7pt] at (2,4) {};
                \foreach \p/\n in { {1,1}/a1, {3,3}/b1, {5,5}/c1} \node[tokB] (\n) at (\p) {};
                \foreach \s/\t in { a1/a2, b1/b2, c1/c2} \draw[jmp1] (\s)--(\t);
                \foreach \s/\t in { a2/ab, b3/ab, c3/abc} \draw[jmp2] (\s)--(\t);
                \draw[jmp1,bend right=45] (b2) to (b3);
                \draw[jmp1,bend right=45] (c2) to (c3);
                \draw[jmp2,bend right=45] (ab) to (abc);
            \end{tikzpicture}}
        \]

        \begin{itemize}
            \item Algorithm is precisely ALL proof search, see \citet{petri-nets}
        \end{itemize}
    }



    \frame{
        \frametitle{Classical Logic (CL)}

        \[
            A, B, C \quad \defeq \quad \top \mid \bot \mid a \mid \dual a \mid A \vee B \mid A \wedge B
        \]

        \begin{itemize}
            \item Analogous to \texttt{True}, \texttt{False} and boolean operations
            \item $\bot, \atom1, \vee$ are duals of $\top, \dual{\atom1}, \wedge$
            \item Similar to ALL formulae
        \end{itemize}
    }

    \frame{
        \frametitle{Classical Logic (CL)}

        Examples:
        \begin{itemize}
            \item $(\atom1 \vee \dual{\atom1}) \wedge (\atom2 \vee \dual{\atom2})$ will be a recurrent example
            \item $\dual{\atom1 \vee \dual{\atom2}} \leftrightsquigarrow \dual{\atom1} \wedge \atom2$ and associated De Morgan laws
            \item $\dual{A} \vee B \leftrightsquigarrow A \implies B$ and other useful syntax
        \end{itemize}
    }

    \frame{
        \frametitle{Classical Logic (CL)}

        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{~}
                    \RightLabel{$\top$}
                    \UnaryInfC{$\vdash \top$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \RightLabel{$\vee$}
                    \UnaryInfC{$\vdash \Gamma, A \vee B$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma$}
                    \RightLabel{$w$}
                    \UnaryInfC{$\vdash \Gamma, A$}
                \end{prooftree}
            \end{minipage}

            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{~}
                    \RightLabel{$ax$}
                    \UnaryInfC{$\vdash a, \dual a$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$\wedge$}
                    \BinaryInfC{$\vdash \Gamma, A \wedge B$}
                \end{prooftree}
            \end{minipage}
            \begin{minipage}[H]{.3\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$c$}
                    \UnaryInfC{$\vdash \Gamma, A$}
                \end{prooftree}
            \end{minipage}
        \end{figure}

        \begin{itemize}
            \item $A, B, C$ are formulae, $\Gamma, \Delta, \Sigma$ are sequents
            \item $\wedge, \vee$ rules preserve the number of terms in a sequent, $c, w$ rules do not
            \item Sequents are commutative, \emph{morally equivalent} up to idempotence
        \end{itemize}
    }

    \frame{
        \frametitle{Classical Logic (CL)}

        Example:
        \begin{prooftree}
            \AxiomC{$~$}
            \RightLabel{$ax$}\UnaryInfC{$\vdash \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \atom1 \vee \neg \atom1$}
            \RightLabel{$c$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1$}
            \AxiomC{$~$}
            \RightLabel{$\top$}\UnaryInfC{$\vdash \top$}
            \RightLabel{$\wedge$}\BinaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top$}
        \end{prooftree}
    }



    \frame{
        \frametitle{Additive Stratification}

        \begin{prooftree}
            \AxiomC{}
            \RightLabel{$\top, ax$}\doubleLine\UnaryInfC{$\vdash A_1$}
            \RightLabel{$w$}\doubleLine\UnaryInfC{$\vdash \Gamma_1$}
            \AxiomC{\dots}
            \AxiomC{}
            \RightLabel{$\top, ax$}\doubleLine\UnaryInfC{$\vdash A_n$}
            \RightLabel{$w$}\doubleLine\UnaryInfC{$\vdash \Gamma_n$}
            \RightLabel{$\wedge, \vee$}\doubleLine\TrinaryInfC{$\vdash P \dots P$}
            \RightLabel{$c$}\doubleLine\UnaryInfC{$\vdash P$}
        \end{prooftree}
        \begin{itemize}
            \item Rearrangement does not affect the number of terms in sequents
            \item Does not work for MLL rules, see \citet{contraction-restrictions}
        \end{itemize}
    }

    \frame{
        \frametitle{Additive Stratification}

        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \RightLabel{$\vee$}\UnaryInfC{$\vdash \Gamma, A \vee B$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A \vee B$, C}
                \end{prooftree}
            \end{minipage}
            $\leadsto$
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A, C$}
                    \RightLabel{$\vee$}\UnaryInfC{$\vdash \Gamma, A \vee B, C$}
                \end{prooftree}
            \end{minipage}
        \end{figure}
        
        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$\wedge$}\BinaryInfC{$\vdash \Gamma, A \wedge B$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A \wedge B, C$}
                \end{prooftree}
            \end{minipage}
            $\leadsto\quad$
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A, C$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, B, C$}
                    \RightLabel{$\wedge$}\BinaryInfC{$\vdash \Gamma, A \wedge B, C$}
                \end{prooftree}
            \end{minipage}
        \end{figure}

        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A, B$}
                \end{prooftree}
            \end{minipage}
            $\leadsto\quad$
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A, A, B$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A, B$}
                \end{prooftree}
            \end{minipage}
        \end{figure}
    }

    \frame{
        \frametitle{Additive Stratification}

        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A$}
                    \RightLabel{$\vee$}\UnaryInfC{$\vdash \Gamma, A \vee B$}
                \end{prooftree}
            \end{minipage}
            $\leadsto$
            \begin{minipage}[H]{0.4\linewidth}
                \begin{prooftree}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$\vee$}\UnaryInfC{$\vdash \Gamma, A \vee B, A$}
                    \RightLabel{$\vee$}\UnaryInfC{$\vdash \Gamma, A \vee B, A \vee B$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A \vee B$}
                \end{prooftree}
            \end{minipage}
        \end{figure}

        \begin{figure}[H]
            \centering
            \begin{minipage}[H]{0.3\linewidth}
                \begin{scprooftree}{0.8}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$\wedge$}\BinaryInfC{$\vdash \Gamma, A \wedge B$}
                \end{scprooftree}
            \end{minipage}
            $\leadsto\quad$
            \begin{minipage}[H]{0.6\linewidth}
                \begin{scprooftree}{0.8}
                    \AxiomC{$\vdash \Gamma, A, A$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, A, B$}
                    \RightLabel{$\wedge$}\BinaryInfC{$\vdash \Gamma, A, A \wedge B$}
                    \AxiomC{$\vdash \Gamma, B$}
                    \RightLabel{$w$}\UnaryInfC{$\vdash \Gamma, B, A \wedge B$}
                    \RightLabel{$\wedge$}\BinaryInfC{$\vdash \Gamma, A \wedge B, A \wedge B$}
                    \RightLabel{$c$}\UnaryInfC{$\vdash \Gamma, A \wedge B$}
                \end{scprooftree}
            \end{minipage}
        \end{figure}

        \begin{itemize}
            \item Proof trees are described as \emph{morally equivalent}, see \citet{proofs-and-types}
        \end{itemize}
    }

    \frame{
        \frametitle{Additive Stratification}

        Previous Example:
        \begin{prooftree}
            \AxiomC{$~$}
            \RightLabel{$ax$}\UnaryInfC{$\vdash \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \atom1 \vee \neg \atom1$}
            \RightLabel{$c$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1$}
            \AxiomC{$~$}
            \RightLabel{$\top$}\UnaryInfC{$\vdash \top$}
            \RightLabel{$\wedge$}\BinaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top$}
        \end{prooftree}
    }

    \frame{
        \frametitle{Additive Stratification}

        Example:
        \begin{prooftree}
            \AxiomC{$~$}
            \RightLabel{$ax$}\UnaryInfC{$\vdash \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \neg \atom1$}
            \RightLabel{$\vee$}\UnaryInfC{$\vdash \atom1 \vee \neg \atom1, \atom1 \vee \neg \atom1$}
            \AxiomC{$~$}
            \RightLabel{$\top$}\UnaryInfC{$\vdash \top$}
            \RightLabel{$w$}\UnaryInfC{$\vdash \top, \atom1 \vee \neg \atom1$}
            \RightLabel{$\wedge$}\BinaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top, \atom1 \vee \neg \atom1$}
            \AxiomC{$~$}
            \RightLabel{$\top$}\UnaryInfC{$\vdash \top$}
            \RightLabel{$w$}\UnaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top, \top$}
            \RightLabel{$\wedge$}\BinaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top, (\atom1 \vee \neg \atom1) \wedge \top$}
            \RightLabel{$c$}\UnaryInfC{$\vdash (\atom1 \vee \neg \atom1) \wedge \top$}
        \end{prooftree}
    }


    \frame{
        \frametitle{Coalescence in CL}

        Example: $\bot \vee (\top \wedge \top)$, $n \seteq 1$

        \newcommand\spawnIGrid[1]{\vc{\begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
                \foreach \x/\a in {1/\,} \draw[gray] (\x,0) node[src] {\footnotesize$\a$} (\x,.7) -- (\x,5.3);
                \foreach \y/\b in {1/\bot, 2/\vee, 3/\top, 4/\wedge, 5/\top} \draw[gray] (0,\y) node[tgt] {\footnotesize$\b$} (.7,\y) -- (1.3,\y);
                \foreach \p/\n/\c in {####1} \node[fill,tok,\c] (\n) at (\p) {};
            \end{tikzpicture}}}
        \newcommand\initSpawnIGrid{\spawnIGrid{{1,3}/a1/blue, {1,5}/b1/red}}

        \[
             \initSpawnIGrid
             \quad\rightsquigarrow\quad
             \spawnIGrid{{1,3}/a1/blue, {1,5}/b1/red, {1,4}/c1/purple}
             \quad\rightsquigarrow\quad
             \spawnIGrid{{1,3}/a1/blue, {1,5}/b1/red, {1,4}/c1/purple, {1,2}/d1/purple}
        \]

    }

    \frame{
        \frametitle{Coalescence in CL}

        Example: $\atom1 \vee \dual{\atom1}$, $n \seteq 2$

        \newcommand\spawnIIGrid[1]{\vc{\begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
                \foreach \x/\a in {1/\atom1, 2/\vee, 3/\dual{\atom1}} \draw[gray] (\x,0) node[src] {\footnotesize$\a$} (\x,.7) -- (\x,3.3);
                \foreach \y/\b in {1/\atom1, 2/\vee, 3/\dual{\atom1}} \draw[gray] (0,\y) node[tgt] {\footnotesize$\b$} (.7,\y) -- (3.3,\y);
                \foreach \p/\n/\c in {####1} \node[fill,tok,\c] (\n) at (\p) {};
            \end{tikzpicture}}}
        \newcommand\initSpawnIIGrid{\spawnIIGrid{{1,3}/a1/blue, {3,1}/b1/red}}

        \[
             \initSpawnIIGrid
             \quad\rightsquigarrow\quad
             \spawnIIGrid{{1,3}/a1/blue, {3,1}/b1/red, {2,3}/c1/blue}
             \quad\rightsquigarrow\quad
             \spawnIIGrid{{1,3}/a1/blue, {3,1}/b1/red, {2,3}/c1/blue, {3,2}/d1/red}
             \quad\rightsquigarrow\quad
             \spawnIIGrid{{1,3}/a1/blue, {3,1}/b1/red, {2,3}/c1/blue, {3,2}/d1/red, {2,2}/e1/blue}
        \]
    
    }

    \frame{
        \frametitle{Coalescence in CL}

        Example $(\atom1 \vee \dual{\atom1}) \wedge (\atom2 \vee \dual{\atom2})$, $n \seteq 2$ 

        \newcommand\spawnIIGrid[1]{\vc{\begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
                \foreach \x/\a in {1/\atom1, 2/\vee, 3/\dual{\atom1}, 4/\wedge, 5/\atom2, 6/\vee, 7/\dual{\atom2}} \draw[gray] (\x,0) node[src] {\footnotesize$\a$} (\x,.7) -- (\x,7.3);
                \foreach \y/\b in {1/\atom1, 2/\vee, 3/\dual{\atom1}, 4/\wedge, 5/\atom2, 6/\vee, 7/\dual{\atom2}} \draw[gray] (0,\y) node[tgt] {\footnotesize$\b$} (.7,\y) -- (7.3,\y);
                \foreach \p/\n/\c in {####1} \node[fill,tok,\c] (\n) at (\p) {};
            \end{tikzpicture}}}
        \newcommand\initSpawnIIGrid{\spawnIIGrid{{1,3}/a1/blue, {3,1}/b1/black!10!green, {5,7}/c1/red, {7,5}/d1/black!10!yellow}}

        \[
            \initSpawnIIGrid
            \quad\rightsquigarrow^*\quad
            \spawnIIGrid{{1,3}/a1/blue, {2,3}/a2/blue, {1,2}/a3/blue, {2,2}/a4/blue, {3,1}/b1/black!10!green, {3,2}/b2/black!10!green, {2,1}/b3/black!10!green, {5,7}/c1/red, {6,7}/c2/red, {5,6}/c3/red, {6,6}/c4/red, {7,5}/d1/black!10!yellow, {7,6}/d2/black!10!yellow, {6,5}/d3/black!10!yellow}
        \]
    }

    \frame{
        \frametitle{Coalescence in CL}

        Example $(\atom1 \vee \dual{\atom1}) \wedge (\atom2 \vee \dual{\atom2})$, $n \seteq 3$, using the above proofs for $A \seteq \atom1 \vee \dual{\atom1}$, $B \seteq \atom2 \vee \dual{\atom2}$

        %\vc{\begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
        %        \foreach \xs/\ys/\xz/\yz/\xl/\yl/\rot in {0/0/1/0/0/2/-1, 0/0/0/1/2/0/0, 0/2/1/0/2*.4/2*.4/-1, 2.8/0.8/0/1/-2*.4/-2*.4/0, 0/2/.4/.4/2/0/-1, 2/0/.4/.4/0/2/45} {
        %            \foreach \z/\a/\d in {0/A/1, 1/\wedge/0, 2/B/1}
        %                \ifthenelse{\d = 0}{
        %                    \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
        %                        node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
        %                        (0,0) -- (0,0)}{
        %                    \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
        %                        node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
        %                        (\xs + \z*\xz - \xl*0.15, \ys + \z*\yz - \yl*0.15) -- (\xs + \z*\xz + \xl*1.15, \ys + \z*\yz + \yl*1.15)}
        %            ;
        %        };
        %        \foreach \p/\n/\d in {{0,0}/a1/blue, {2,2}/b1/red}} \node[fill,tok,\d] (\n) at (\p) {};
        %    \end{tikzpicture}}

            \begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
                \foreach \xs/\ys/\xz/\yz/\xl/\yl/\rot in {0/0/1/0/0/2/-1, 0/0/0/1/2/0/0, 0/2/1/0/2*.4/2*.4/-1, 2.8/0.8/0/1/-2*.4/-2*.4/0, 0/2/.4/.4/2/0/-1, 2/0/.4/.4/0/2/45} {
                    \foreach \z/\a/\d in {0/A/1, 1/\wedge/0, 2/B/1}
                        \ifthenelse{\d = 0}{
                            \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
                                node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
                                (0,0) -- (0,0)}{
                            \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
                                node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
                                (\xs + \z*\xz - \xl*0.15, \ys + \z*\yz - \yl*0.15) -- (\xs + \z*\xz + \xl*1.15, \ys + \z*\yz + \yl*1.15)}
                    ;
                };
                \foreach \p/\n/\d in {{0,0}/a1/blue, {2,2}/b1/red} \node[fill,tok,\d] (\n) at (\p) {};
            \end{tikzpicture}
            $\quad\rightsquigarrow\quad$
            \begin{tikzpicture}[matrix,x=-3.5mm,y=3.5mm]
                \foreach \xs/\ys/\xz/\yz/\xl/\yl/\rot in {0/0/1/0/0/2/-1, 0/0/0/1/2/0/0, 0/2/1/0/.8/.8/-1, 2.8/0.8/0/1/-.8/-.8/0, 0/2/.4/.4/2/0/-1, 2/0/.4/.4/0/2/45} {
                    \foreach \z/\a/\d in {0/A/1, 1/\wedge/0, 2/B/1}
                        \ifthenelse{\d = 0}{
                            \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
                                node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
                                (0,0) -- (0,0)}{
                            \draw[gray] (\xs + \z*\xz - \xl*0.5, \ys + \z*\yz - \yl*0.5)
                                node[tgt] {\ifthenelse{\rot > -1}{\rotatebox{\rot}{\footnotesize$\a$}}{}}
                                (\xs + \z*\xz - \xl*0.15, \ys + \z*\yz - \yl*0.15) -- (\xs + \z*\xz + \xl*1.15, \ys + \z*\yz + \yl*1.15)}
                    ;
                };
                \foreach \s/\e/\n/\d in {{0,0}/{}/a1/blue, {2,2}/b1/red} \node[fill,tok,\d] (\n) at (\s) {};
            \end{tikzpicture}

    }

    \frame{
        \frametitle{Coalescence in CL}

        For a formula $P$ in CL, the coalescence algorithm runs as follows:
        \begin{enumerate}
            \item Set $n := 1$
            \item\label{l} Construct the $n$-dimensional grid of possible $n$-term sequents $\vdash A_1 \dots A_n \in \subs A \* \dots_n \* \subs A$
            \item Spawn tokens at all instances of axiom links $\vdash \Gamma, a, \dual a$
            \item Exhaustively perform transitions given by the CL sequent calculus rules
            \item Does there exist a token at $(P, P \dots P) \equiv \,\, \vdash P, P \dots P \equiv \,\, \vdash P$?
            \begin{enumerate}
                \item Yes --- Halt with a proof for $P$ and dimensionality $n$
                \item No --- Increment $n := n + 1$ and goto~\ref{l}
            \end{enumerate}
        \end{enumerate}
    }



    \frame{
        \frametitle{Questions}
        
        % TODO: upper bound on dimension, what is a good representation for (matrix | tokens | ...)
    }



    \frame{
        \frametitle{Dimensionality}

        The dimensionality of a proof is then the dimensionality of our grid when the root is reached, equivalent to the number of contractions required in an equivalent sequent proof.
        A CL formula can thus be proved by an $n$-dimensional additively stratified proof, where $n$ is the number of terms in a sequent before contraction.
        Through a natural transformation on steps of the algorithm to equivalent sequent proofs, coalescence up to $n = N$ is then exactly (additively stratified) proof search, with implicit weakening and contraction of all sequents up to $N$ terms.
    }



    \frame{
        \frametitle{Conclusion}
    }



    \frame{
        \frametitle{References}
        \bibliography{dortmund}
    }

\end{document}
